@using ElasticsearchCodeSearch.Client.Extensions;
@using ElasticsearchCodeSearch.Shared.Dto;

<div class="code-box">
    <div class="code-box-title">
        <strong>@Owner/@Repository</strong> - <a href="@Permalink">@Path</a>
    </div>
    <div class="code-box-content">
        @foreach (var line in HighlitedContent)
        {
            <div class="code-line @codeLineClass(line)">
                <div class="code-line-number">
                    @line.LineNo
                </div>
                <div class="code-line-content">
                    @line.Content
                </div>
            </div>
        }
    </div>
</div>

@code {
    /// <summary>
    /// Determines the classes to add for the Line.
    /// </summary>
    /// <param name="highlightedContent">Highlighted Content</param>
    /// <returns></returns>
    string codeLineClass(HighlightedContentDto highlightedContent) => highlightedContent.IsHighlight ? "highlighted-line" : string.Empty;

    /// <summary>
    /// Filename.
    /// </summary>
    [Parameter]
    public required string Path { get; set; }

    /// <summary>
    /// Filename.
    /// </summary>
    [Parameter]
    public required string Filename { get; set; }

    /// <summary>
    /// Owner.
    /// </summary>
    [Parameter]
    public required string Owner { get; set; }

    /// <summary>
    /// Repository.
    /// </summary>
    [Parameter]
    public required string Repository { get; set; }

    /// <summary>
    /// Url.
    /// </summary>
    [Parameter]
    public required string Permalink { get; set; }

    /// <summary>
    /// Matches.
    /// </summary>
    [Parameter]
    public required List<HighlightedContentDto> HighlitedContent { get; set; }
}
